<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Receipt</title>
  <style>
    body { font-family: Arial, sans-serif; }
    .receipt { border: 1px solid #ccc; padding: 20px; width: 600px; margin: auto; }
    h2 { text-align: center; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
    th { background-color: #f5f5f5; }
  </style>
</head>
<body>
  <div class="receipt">
    <h2>Payment Receipt</h2>
    <p><strong>Invoice Number:</strong> {{ invoice.invoice_number }}</p>
    <p><strong>Student:</strong> {{ invoice.student }}</p>
    <p><strong>Total Invoice Amount:</strong> ₦{{ invoice.total_amount|floatformat:2 }}</p>
    <p><strong>Amount Paid:</strong> ₦{{ invoice.amount_paid|floatformat:2 }}</p>
    <p><strong>Balance Remaining:</strong> ₦{{ invoice.balance|floatformat:2 }}</p>

    <h3>Payment History</h3>
    <table>
      <thead>
        <tr>
          <th>Date Paid</th>
          <th>Amount</th>
          <th>Method</th>
          <th>Transaction ID</th>
        </tr>
      </thead>
      <tbody>
        {% for payment in payments %}
          <tr>
            <td>{{ payment.date_paid|date:"F j, Y, g:i a" }}</td>
            <td>₦{{ payment.amount }}</td>
            <td>{{ payment.get_payment_method_display }}</td>
            <td>{{ payment.transaction_id|default:"-" }}</td>
          </tr>
        {% empty %}
          <tr>
            <td colspan="4">No payments recorded.</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</body>
</html>
